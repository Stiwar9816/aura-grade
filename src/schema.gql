# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type Course {
  id: String!
  course_name: String!
  code_course: String!
  users: [User!]
}

type Rubric {
  id: String!
  title: String!
  maxTotalScore: Float!
  user: User!
  criteria: [Criterion!]!
}

type User {
  id: String!
  name: String!
  last_name: String!
  document_type: DocumentType!
  document_num: Float!
  phone: Float!
  email: String!
  password: String!
  isActive: Boolean!
  role: UserRoles!

  """Many-to-many relationship with course table"""
  courses: [Course!]

  """One-to-Many relationship with rubric table"""
  createdRubrics: [Rubric!]
  submissions: [Submission!]
  assignments: [Assignment!]
}

"""
Document type allowed in the system [Cedula de ciudadania, Pasaporte, Registro civil, Cedula de extranjeria, Libreta militar, Tarjeta de identidad]
"""
enum DocumentType {
  CITIZENSHIP_CARD
  PASSPORT
  CIVIL_REGISRTRY
  FOREIGNER_CARD
  MILITARY_ID
  IDENTITY_CARD
}

"""Roles allowed in the system [Administrador, Estudiante, Docente]"""
enum UserRoles {
  Administrador
  Estudiante
  Docente
}

type CriterionLevel {
  score: Int!
  description: String!
}

type Criterion {
  id: String!
  title: String!
  maxPoints: Int!

  """Performance levels with description and score."""
  levels: [CriterionLevel!]!
  rubric: Rubric!
}

type Assignment {
  id: ID!
  title: String!
  description: String!
  dueDate: DateTime!
  isActive: Boolean!
  createdAt: DateTime!
  user: User!
  rubric: Rubric!
  submissions: [Submission!]
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type Submission {
  id: ID!

  """URL of the file stored (Cloudinary)"""
  fileUrl: String!

  """Extracted text from the document for the AI"""
  extractedText: String
  status: SubmissionStatus!
  createdAt: DateTime!
  updatedAt: DateTime!
  student: User!
  assignment: Assignment!
  evaluation: Evaluation
}

"""Status of a submission"""
enum SubmissionStatus {
  PENDING
  IN_PROGRESS
  COMPLETED
  FAILED
}

type Evaluation {
  id: ID!
  totalScore: Float!
  generalFeedback: String!
  detailedFeedback: JSON!
  aiModelUsed: String
  createdAt: DateTime!
  submission: Submission!
}

"""
The `JSON` scalar type represents JSON values as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar JSON

type Query {
  """Find all users"""
  users: [User!]!

  """Search for a user by a unique ID"""
  userByID(id: String!): User!

  """Search for a user by a unique Email"""
  userByEmail(email: String!): User!
  courses: [Course!]!
  course(id: String!): Course!
  rubrics: [Rubric!]!
  rubric(id: String!): Rubric!
  assignments: [Assignment!]!
  assignment(id: ID!): Assignment!
  submissions: [Submission!]!
  submission(id: ID!): Submission!
  criteria: [Criterion!]!
  criterion(id: String!): Criterion!
  evaluations: [Evaluation!]!
  Evaluation(id: ID!): Evaluation!
  evaluationBySubmission(submissionId: ID!): Evaluation!
}

type Mutation {
  """Updates the data of a user by a unique ID"""
  updateUser(updateUserInput: UpdateUserInput!): User!

  """Inactivate a user"""
  blockUser(id: String!): User!

  """Reset password user"""
  resetPassword(resetPassword: String!): User!

  """Reset password user authenticed"""
  resetPasswordAuth(newPassword: String!): User!

  """Assign multiple courses to a user"""
  assignCoursesToUser(assignCoursesInput: AssignCoursesInput!): User!
  createCourse(createCourseInput: CreateCourseInput!): Course!
  updateCourse(updateCourseInput: UpdateCourseInput!): Course!
  removeCourse(id: String!): Course!
  createRubric(createRubricInput: CreateRubricInput!): Rubric!
  updateRubric(updateRubricInput: UpdateRubricInput!): Rubric!
  removeRubric(id: String!): Rubric!
  createAssignment(createAssignmentInput: CreateAssignmentInput!): Assignment!
  updateAssignment(updateAssignmentInput: UpdateAssignmentInput!): Assignment!
  removeAssignment(id: ID!): Assignment!
  createSubmission(createSubmissionInput: CreateSubmissionInput!): Submission!
  updateSubmission(updateSubmissionInput: UpdateSubmissionInput!): Submission!
  removeSubmission(id: ID!): Submission!
  createCriterion(createCriterionInput: CreateCriterionInput!): Criterion!
  updateCriterion(updateCriterionInput: UpdateCriterionInput!): Criterion!
  removeCriterion(id: String!): Criterion!
  createEvaluation(createEvaluationInput: CreateEvaluationInput!): Evaluation!
  updateEvaluation(updateEvaluationInput: UpdateEvaluationInput!): Evaluation!
  removeEvaluation(id: ID!): Boolean!
}

input UpdateUserInput {
  """User name"""
  name: String

  """User Last_name"""
  last_name: String

  """User document type"""
  document_type: DocumentType

  """User document number"""
  document_num: Float

  """User Phone"""
  phone: Float

  """User Email"""
  email: String

  """
  User password that must have a minimum length of 6 digits and the password must have an Uppercase, lowercase letter and a number
  """
  password: String

  """User roles wich can Administrator, User by default takes the user role"""
  role: UserRoles! = Estudiante

  """
  Id automatically generated in integer format eg: 2ad0bc6e-7c63-43bd-ad90-feb291d985b4
  """
  id: ID!

  """User roles wich can Administrator, User by default takes the user role"""
  isActive: Boolean!
}

input AssignCoursesInput {
  userId: ID!
  courseIds: [ID!]!
}

input CreateCourseInput {
  """Name of the course"""
  course_name: String!

  """Code of the course"""
  code_course: String!
}

input UpdateCourseInput {
  """Name of the course"""
  course_name: String

  """Code of the course"""
  code_course: String

  """Id automatically generated in uuid format"""
  id: ID!
}

input CreateRubricInput {
  """Title of the rubric"""
  title: String!

  """Max total score of the rubric"""
  maxTotalScore: Float!

  """List of criteria"""
  criteria: [CreateCriterionInput!]

  """Owner User ID"""
  userId: ID!
}

input CreateCriterionInput {
  """Criterion title"""
  title: String!

  """Max points"""
  maxPoints: Int!

  """Criterion levels"""
  levels: [CreateCriterionLevelsInput!]!
}

input CreateCriterionLevelsInput {
  """Score assigned to this level"""
  score: Int!

  """Description of this level"""
  description: String!
}

input UpdateRubricInput {
  """Title of the rubric"""
  title: String

  """Max total score of the rubric"""
  maxTotalScore: Float

  """List of criteria"""
  criteria: [CreateCriterionInput!]

  """Owner User ID"""
  userId: ID

  """
  Id automatically generated in integer format eg: 2ad0bc6e-7c63-43bd-ad90-feb291d985b4
  """
  id: ID!
}

input CreateAssignmentInput {
  """title of the task"""
  title: String!

  """Detailed instructions"""
  description: String!

  """Due date"""
  dueDate: DateTime!

  """Rubric ID"""
  rubricId: ID!

  """Teacher ID"""
  userId: ID!
  isActive: Boolean = true
}

input UpdateAssignmentInput {
  """title of the task"""
  title: String

  """Detailed instructions"""
  description: String

  """Due date"""
  dueDate: DateTime

  """Rubric ID"""
  rubricId: ID

  """Teacher ID"""
  userId: ID
  isActive: Boolean = true

  """ID of the assignment to update"""
  id: ID!
}

input CreateSubmissionInput {
  """URL the file uploaded"""
  fileUrl: String!

  """ID of the assignment"""
  assignmentId: ID!

  """ID of the student"""
  studentId: ID!

  """Extracted text from the document for the AI"""
  extractedText: String
}

input UpdateSubmissionInput {
  """URL the file uploaded"""
  fileUrl: String

  """ID of the assignment"""
  assignmentId: ID

  """ID of the student"""
  studentId: ID

  """Extracted text from the document for the AI"""
  extractedText: String

  """Submission ID"""
  id: ID!

  """Submission status"""
  status: SubmissionStatus
}

input UpdateCriterionInput {
  """Criterion title"""
  title: String

  """Max points"""
  maxPoints: Int

  """Criterion levels"""
  levels: [CreateCriterionLevelsInput!]

  """
  Id automatically generated in uuid format eg: 2ad0bc6e-7c63-43bd-ad90-feb291d985b4
  """
  id: ID!
  criteria: [UpdateCriterionInput!]
}

input CreateEvaluationInput {
  """Total Score"""
  totalScore: Float!

  """General Feedback"""
  generalFeedback: String!

  """Detailed Feedback"""
  detailedFeedback: JSON!

  """Submission ID"""
  submissionId: ID!

  """AI Model Used"""
  aiModelUsed: String
}

input UpdateEvaluationInput {
  """Total Score"""
  totalScore: Float

  """General Feedback"""
  generalFeedback: String

  """Detailed Feedback"""
  detailedFeedback: JSON

  """Submission ID"""
  submissionId: ID

  """AI Model Used"""
  aiModelUsed: String

  """ID de la evaluaci√≥n a actualizar"""
  id: ID!
}